<!DOCTYPE html>
<html lang="en-US" class="no-js"><head itemscope="itemscope" itemtype="http://schema.org/WebSite"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script><title>Utilizzare il Raspberry Pi 3 via Termux - Blog un po' nerd</title><meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Utilizzare il Raspberry Pi 3 via Termux - Blog un po' nerd"><meta property="og:description" content="AGGIORNATO IN DATA 8/03/2018 In data 8/03/2018 ho modificato quasi completamente il post originale, perché ho deciso di impuntarmi e risolvere i miei problemi con Raspbian Stretch. La soluzione adottata in questa versione dell’articolo è senza dubbio migliore della precedente: è più facile, più veloce e ho utilizzato una distribuzione (Raspbian) adatta ad un uso … Continue reading Utilizzare il Raspberry Pi 3 via Termux"><meta property="og:url" content="https://luigigubello.github.io/blog/utilizzare-il-raspberry-pi-3-via-termux/"><meta property="og:site_name" content="Blog un po' nerd"><meta property="article:section" content="Italian"><meta property="article:published_time" content="2018-03-07T09:08:20+00:00"><meta property="article:modified_time" content="2018-03-26T17:37:31+00:00"><meta property="og:updated_time" content="2018-03-26T17:37:31+00:00"><meta property="og:image" content="https://luigigubello.github.io/blog/wp-content/uploads/2017/12/banner_social.png"><meta property="og:image:width" content="700"><meta property="og:image:height" content="235"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="AGGIORNATO IN DATA 8/03/2018 In data 8/03/2018 ho modificato quasi completamente il post originale, perché ho deciso di impuntarmi e risolvere i miei problemi con Raspbian Stretch. La soluzione adottata in questa versione dell’articolo è senza dubbio migliore della precedente: è più facile, più veloce e ho utilizzato una distribuzione (Raspbian) adatta ad un uso … Continue reading Utilizzare il Raspberry Pi 3 via Termux"><meta name="twitter:title" content="Utilizzare il Raspberry Pi 3 via Termux - Blog un po' nerd"><meta name="twitter:image" content="https://www.gubello.me/blog/wp-content/uploads/2017/12/banner_social.png"><script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "WebSite",
            "@id": "https://luigigubello.github.io/blog/#website",
            "url": "https://luigigubello.github.io/blog/",
            "name": "Blog un po' nerd",
            "inLanguage": "en-US",
            "description": "Nerd is the new Hipster",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://luigigubello.github.io/blog/?s={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        },
        {
            "@type": "WebPage",
            "@id": "https://luigigubello.github.io/blog/utilizzare-il-raspberry-pi-3-via-termux/#webpage",
            "url": "https://luigigubello.github.io/blog/utilizzare-il-raspberry-pi-3-via-termux/",
            "name": "Utilizzare il Raspberry Pi 3 via Termux - Blog un po' nerd",
            "isPartOf": {
                "@id": "https://luigigubello.github.io/blog/#website"
            },
            "inLanguage": "en-US",
            "datePublished": "2018-03-07T09:08:20+00:00",
            "dateModified": "2018-03-26T17:37:31+00:00",
            "author": {
                "@id": "https://luigigubello.github.io/blog/#/schema/person/3e0819226c43d8f09f15276ee0bf80b3"
            }
        },
        {
            "@type": [
                "Person"
            ],
            "@id": "https://luigigubello.github.io/blog/#/schema/person/3e0819226c43d8f09f15276ee0bf80b3",
            "name": "luigi",
            "image": {
                "@type": "ImageObject",
                "@id": "https://luigigubello.github.io/blog/#authorlogo",
                "inLanguage": "en-US",
                "url": "http://0.gravatar.com/avatar/3cd96ff9c34c26a52f9873f52c72b268?s=96&d=mm&r=g",
                "caption": "luigi"
            },
            "sameAs": []
        }
    ]
}</script><link rel="dns-prefetch" href="//localhost"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//s.w.org"><link rel="stylesheet" id="wp-block-library-css" href="https://luigigubello.github.io/blog/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all"><link rel="stylesheet" id="munsa-lite-fonts-css" href="https://fonts.googleapis.com/css?family=Merriweather%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700&subset=latin%2Clatin-ext" type="text/css" media="all"><link rel="stylesheet" id="genericons-css" href="https://luigigubello.github.io/blog/wp-content/themes/munsa-lite/fonts/genericons/genericons.css" type="text/css" media="all"><link rel="stylesheet" id="munsa-lite-style-css" href="https://luigigubello.github.io/blog/wp-content/themes/munsa-lite/style.css" type="text/css" media="all"><link rel="stylesheet" id="wp-social-sharing-css" href="https://luigigubello.github.io/blog/wp-content/plugins/wp-social-sharing/static/socialshare.css" type="text/css" media="all"><script type="text/javascript" src="https://luigigubello.github.io/blog/wp-includes/js/jquery/jquery.js"></script><script type="text/javascript" src="https://luigigubello.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script><style type="text/css" id="custom-header-css">.site-title, .site-title a, .site-description, .site-description a { color: #000000 }</style><link rel="icon" href="https://luigigubello.github.io/blog/wp-content/uploads/2017/12/cropped-favicon-1-32x32.jpg" sizes="32x32"><link rel="icon" href="https://luigigubello.github.io/blog/wp-content/uploads/2017/12/cropped-favicon-1-192x192.jpg" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="https://luigigubello.github.io/blog/wp-content/uploads/2017/12/cropped-favicon-1-180x180.jpg"><meta name="msapplication-TileImage" content="https://luigigubello.github.io/blog/wp-content/uploads/2017/12/cropped-favicon-1-270x270.jpg"><style type="text/css" id="wp-custom-css">
			/* Remove post summary from home page */

.home .entry-summary { display: none; }

		</style></head><body class="post-template-default single single-post postid-239 single-format-standard wp-custom-logo primary-menu-sidebar-active" itemscope="itemscope" itemtype="http://schema.org/Blog">

<div id="site-wrapper" class="site-wrapper">
	<div id="page" class="site">
	
	
	<div id="preloader" class="preloader">
		<div id="status" class="status">
			<span class="screen-reader-text">Site is loading</span>
			<div class="sk-three-bounce">
				<div class="sk-child sk-bounce1"></div>
				<div class="sk-child sk-bounce2"></div>
				<div class="sk-child sk-bounce3"></div>
			</div>
		</div>
	</div>
		
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
		
		
				
		<header id="masthead" class="site-header" role="banner" itemscope="itemscope" itemtype="http://schema.org/WPHeader"><div class="site-branding">
			
							
				<a href="https://luigigubello.github.io/blog/" class="custom-logo-link" rel="home"><img width="192" height="192" src="https://luigigubello.github.io/blog/wp-content/uploads/2017/12/cropped-favicon-2.jpg" class="custom-logo" alt="Blog un po' nerd" srcset="https://luigigubello.github.io/blog/wp-content/uploads/2017/12/cropped-favicon-2.jpg 192w,https://luigigubello.github.io/blog/wp-content/uploads/2017/12/cropped-favicon-2-150x150.jpg 150w,https://luigigubello.github.io/blog/wp-content/uploads/2017/12/cropped-favicon-2-125x125.jpg 125w" sizes="(max-width: 192px) 100vw, 192px"></a>			
									<p class="site-title" itemprop="headline"><a href="https://luigigubello.github.io/blog/" rel="home">Blog un po' nerd</a></p>
								
				<p class="site-description" itemprop="description">Nerd is the new Hipster</p>
			
							
			</div>
			
		</header><button id="menu-button" class="main-navigation-toggle menu-sidebar-toggle" aria-controls="menu-primary">Menu</button>

	<nav id="menu-primary" class="menu main-navigation menu-primary animated" role="navigation" aria-label="Primary Menu" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement"><button id="menu-close" class="main-navigation-toggle main-navigation-close menu-sidebar-close menu-sidebar-toggle" aria-controls="menu-primary">Close</button>

			<div class="wrap animated">
			
				<div class="primary-menu-container"><ul id="primary-menu" class="menu"><li id="menu-item-24" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-24"><a href="https://luigigubello.github.io/blog">Blog</a></li>
<li id="menu-item-16" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-16"><a href="https://luigigubello.github.io/blog/about/">About</a></li>
</ul></div>		
			</div>

	</nav><div id="content" class="site-content">
		
			<div id="primary" class="content-area">
				<main id="main" class="site-main" role="main"><article id="post-239" class="post-239 post type-post status-publish format-standard category-italian category-raspberry entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost"><header class="entry-header"><h1 class="entry-title" itemprop="headline">Utilizzare il Raspberry Pi 3 via Termux</h1>			
	<div class="entry-meta">
		<span class="entry-date"><span class="screen-reader-text">Posted on </span><a href="https://luigigubello.github.io/blog/utilizzare-il-raspberry-pi-3-via-termux/" rel="bookmark"><time class="entry-date" datetime="2018-03-07T10:08:20+01:00" itemprop="datePublished">7 March 2018</time></a></span><span class="byline"><span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><span class="screen-reader-text">Author </span><a class="entry-author-link" href="https://luigigubello.github.io/blog/author/luigi/" rel="author" itemprop="url"><span itemprop="name">luigi</span></a></span></span>			</div>
		</header><div class="entry-content" itemprop="articleBody">
			
			<h6>AGGIORNATO IN DATA 8/03/2018</h6>
<p><strong>In data 8/03/2018 ho modificato quasi completamente il post originale, perché ho deciso di impuntarmi e risolvere i miei problemi con Raspbian Stretch. La soluzione adottata in questa versione dell’articolo è senza dubbio migliore della precedente: è più facile, più veloce e ho utilizzato una distribuzione (Raspbian) adatta ad un uso giornaliero. Ho comunque salvato in un file pdf l’articolo originale, che potete <a href="https://luigigubello.github.io/blog/wp-content/uploads/2018/03/Utilizzare_il_Raspberry_Pi_3_via_Termux_Prima_Versione.pdf">scaricare qui</a>.</strong></p>
<p style="text-align: center;"><strong>+++++++++++++++++++</strong></p>
<p>Qualche mese fa ho comprato un Raspberry Pi 3 Model B, l’ho comprato per curiosità, per giocarci (letteralmente). Nelle settimane successive ho acquistato un piccolo <a href="http://www.quimat.cn/cpzs/sjpj/313.html">schermo da 3,5 pollici</a>, una powerbank e un paio di joystick (modello Nintendo SNES) e grazie al bellissimo progetto <a href="https://www.retropie.it/">RetroPie</a> ho trasformato il mio Raspberry in una console portatile di giochi retro.</p>
<p>Nel frattempo ho anche voluto provare qualche distribuzione, ne ho provate in totale tre: <strong>Raspbian Jessie</strong>, <strong>Raspbian Stretch</strong> e <strong>Kali Linux 2017.3</strong>. Il primo approccio con Raspbian Jessie è stato perfetto, tutto funzionava alla perfezione, non ha richiesto particolari configurazioni. Purtroppo non posso dire lo stesso della versione successiva, Stretch, <del>che continua a darmi problemi nonostante sia ormai considerata stabile, soprattutto continua a bloccarsi totalmente il sistema operativo quando quest’ultimo utilizza l’antenna wireless integrata per connettersi alla rete</del> <strong>(problematica risolta)</strong>. Proprio a causa di questi piccoli problemi con Raspbian Stretch ho deciso di provare anche Kali Linux perché dalla versione <strong>2017.3</strong> contiene il <strong><a href="https://whitedome.com.au/re4son/re4son-kernel/">kernel Re4son</a> </strong>, un kernel modificato che al suo interno ha preinstallati diversi driver per vari chipset wireless.</p>
<p>L’obiettivo di questo post è spiegare come configurare un Raspberry per poterlo usare tramite smartphone Android via connessione SSH, anche se il Raspberry non è connesso a nessuna rete wi-fi.</p>
<p>Io mi sono trovato, casualmente, a dovermi arrangiare con questi oggetti:</p>
<ul><li><span style="font-size: 1rem;">Raspberry Pi 3 Model B + </span><del style="font-size: 1rem;"> Kali 2017.3</del><strong style="font-size: 1rem;"> Raspbian Stretch</strong></li>
<li>‎TP Link TL-WN722N v3</li>
</ul><p>La mia chiavetta ha un chipset Realtek e Raspbian Stretch la riconosce subito automaticamente, ma se così non fosse basta dare i seguenti comandi per risolvere la situazione:</p>
<p><code>sudo apt-get update<br>
sudo apt-get install firmware-realtek</code></p>
<p>Per utilizzare il Raspberry via SSH anche se quest’ultimo non è connesso a una rete l’idea è quella di usare (almeno) due antenne wi-fi, una per creare un access point e  un’altra libera di connettersi a internet. Una volta creato un AP potremmo connetterci via SSH tramite l’applicazione <a href="https://termux.com/"><strong>Termux</strong></a> e utilizzare così il terminale. In ordine ho dovuto:</p>
<ol><li>Installare <em>Network Manager</em> e rinunciare a <em>dhcpd</em></li>
<li>Configurare Raspbian affinché ad ogni avvio assegni sempre gli stessi nomi alle antenne wi-fi</li>
<li>Creare un access point e far sì che questo si crei in automatico ad ogni avvio</li>
</ol><h4 style="text-align: center;">1.</h4>
<p>Ho deciso di rinunciare a <strong>dhcpd</strong><em> </em>in favore di <strong>Network Manager</strong>, perché quest’ultimo semplifica molto la vita quando ci si vuole connettere a una rete wi-fi usando solo il terminale e perché con dhcpd, usando l’antenna integrata, Raspbian Stretch mi si blocca in maniera quasi sistematica. Seguendo un <a href="https://raspberrypi.stackexchange.com/questions/29783/how-to-setup-network-manager-on-raspbian">commento</a> su StackExchange, do i seguenti comandi nel terminale:</p>
<p><code>sudo apt-get install network-manager network-manager-gnome<br>
sudo apt-get purge openresolv dhcpcd5<br>
sudo ln -sf /lib/systemd/resolv.conf /etc/resolv.conf</code></p>
<p>Fatto ciò posso rimuovere l’icona del wi-fi nel pannello in alto, che verrà sostituita dall’icona di Network Manager.</p>
<p><code>reboot</code></p>
<h4 style="text-align: center;">2.</h4>
<p>A questo punto devo assegnare dei nomi fissi alle due antenne wi-fi, quella interna e quella esterna. Dopo numerosi tentativi falliti scopro, grazie a un <a href="https://www.raspberrypi.org/forums/viewtopic.php?t=191639">topic</a> sul forum di RaspberryPi, che prima bisogna eliminare il file <strong>/etc/systemd/network/99-default.link</strong>.<br>
Ritento e fallisco ancora, scopro infatti che <a href="https://forums.kali.org/showthread.php?33405-SOLVED-NetworkManager-reverts-spoofed-MAC-to-permanent-one-or-randomizes-it">Network Manager cambia i MAC Address ad ogni avvio</a>, per evitare ciò modifico il file <b>/etc/NetworkManager/NetworkManager.conf </b>e aggiungo le seguenti righe:</p>
<p><code>[device]<br>
wifi.scan-rand-mac-address=no</code></p>
<p><code>[connection]<br>
ethernet.cloned-mac-address=preserve<br>
wifi.cloned-mac-address=preserve</code></p>
<p>Salvo e riavvio due volte per accertarmi che i MAC Address siano persistenti. Una volta fatto ciò mi basta creare il file <strong>/etc/udev/rules.d/70-persistent-net.rules </strong>e aggiungerci il seguente testo:</p>
<p><code>ACTION=="add", SUBSYSTEM=="net", DRIVERS=="brcmfmac", NAME="wlan0"<br>
ACTION=="add", SUBSYSTEM=="net", DRIVERS=="?*", ATTR{address}=="mac:addr:ext:wifi", NAME="wlan1"</code></p>
<p>Riavvio, per accertarmi che i nomi siano correttamente assegnati: <strong>wlan0</strong> è l’antenna integrata nel Raspberry e servirà a creare l’access point e <strong>wlan1 </strong>è l’antenna USB che servirà per collegarsi alle reti wi-fi .</p>
<h4 style="text-align: center;">3.</h4>
<p>Ora bisogna creare un access point, ci sono diverse guide in internet, ma io ho trovato molto comodo e veloce il programma <a href="https://github.com/oblique/create_ap"><strong>create_ap</strong> di <strong>oblique</strong></a>. Procedo quindi all’installazione di <strong>create_ap</strong>:</p>
<p><code>git clone https://github.com/oblique/create_ap<br>
cd create_ap<br>
sudo make install</code></p>
<p>Digito ora i seguenti comandi, che servono a creare un access point con l’antenna integrata del Raspberry, appoggiarsi all’antenna esterna per collegarsi ad una rete wi-fi e ripetere quest’azione ad ogni avvio:</p>
<p><code>sudo create_ap wlan0 wlan1 AccessPoint PasswordAP --mkconfig /etc/create_ap.conf<br>
sudo systemctl start create_ap<br>
sudo systemctl enable create_ap<br>
reboot</code></p>
<p>A questo punto, se tutto fila liscio, appare la rete wi-fi <em>AccessPoint</em>, collego il telefono a questa rete wi-fi, e apro Termux dove digito il comando <code>ssh root@192.168.12.1</code>. Inserisco le credenziali d’accesso et voilà! Posso utilizzare il Raspberry comodamente tramite smartphone. Un programma utile per gestire al meglio le connessioni SSH è <strong>screen</strong>.</p>
<p>C’è un ultimo problema da risolvere: l’access point creato per ora non ha una connessione ad internet, e se il telefono è connesso alla rete creata dal Raspberry allora non può essere connesso a un’altra rete wi-fi (e quindi è privo di una connessione internet). Basta utilizzare quindi <strong>wlan1</strong> per connettere il Raspberry ad una rete wi-fi funzionante. Per fare ciò uso il comando <strong>nmcli</strong>, che non è altro che il Network Manager da riga di comando.</p>
<p><code>nmcli device wifi rescan<br>
nmcli device wifi list<br>
nmcli device wifi connect SSID-Name password wireless-password</code></p>
<p>Ringrazio <a href="https://nullr0ute.com/2016/09/connect-to-a-wireless-network-using-command-line-nmcli/">un post di</a> <a href="https://nullr0ute.com/about/">Peter Robinson</a> per avermi fatto scoprire questo comando e avermi semplificato la vita. Questa, per ora, è la soluzione che ho adottato io.</p>
<p><strong>Pareri e conclusioni personali:</strong></p>
<ul><li>Kali 2017.3 è una buona distribuzione per Raspberry, soprattutto grazie al suo kernel e ai repository molto ampi, ma non è pensata per un utilizzo giornaliero.</li>
<li>La mia esperienza con Raspbian Jessie è stata di gran lunga migliore di quella con Raspbian Stretch.</li>
<li>Il progetto Retropie per emulare vecchi videogiochi è davvero bellissimo, se non sapete come utilizzare un Raspberry, compratevi due joystick, installate Retropie e giocate a Mario Kart, che è avvincente anche dopo trent’anni.</li>
<li><del>Visto le piccole, ma pur sempre fastidiose, problematiche con l’ultima versione di Raspbian penso proverò Ubuntu Mate 16 per Raspberry. L’idea è di trovare una distribuzione con cuore Debian che sia stabile e leggera per un utilizzo giornaliero.</del><br>
Ho provato Ubuntu Mate 16 e personalmente l’ho trovato terribile.</li>
</ul><div class="social-sharing ss-social-sharing">
				        <a onclick="return ss_plugin_loadpopup_js(this);" rel="external nofollow" class="ss-button-facebook" href="http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%2Fblog%2Futilizzare-il-raspberry-pi-3-via-termux%2F" target="_blank">Share on Facebook</a><a onclick="return ss_plugin_loadpopup_js(this);" rel="external nofollow" class="ss-button-twitter" href="http://twitter.com/intent/tweet/?text=Utilizzare+il+Raspberry+Pi+3+via+Termux&url=http%3A%2F%2Flocalhost%2Fblog%2Futilizzare-il-raspberry-pi-3-via-termux%2F" target="_blank">Share on Twitter</a><a onclick="return ss_plugin_loadpopup_js(this);" rel="external nofollow" class="ss-button-linkedin" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%2Fblog%2Futilizzare-il-raspberry-pi-3-via-termux%2F&title=Utilizzare+il+Raspberry+Pi+3+via+Termux" target="_blank">Share on Linkedin</a>	        	    </div>
	    
						
		</div>
		
		<footer class="entry-footer"><div class="footer-wrap">
								<div class="entry-categories"><span class="terms-title categories-title">Categories</span><span class="entry-terms category" itemprop="articleSection">#<a href="https://luigigubello.github.io/blog/category/italian/" rel="tag">Italian</a> #<a href="https://luigigubello.github.io/blog/category/raspberry/" rel="tag">Raspberry</a></span></div>							</div>
		</footer></article><nav class="navigation post-navigation" role="navigation" aria-label="Posts"><h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://luigigubello.github.io/blog/bookly-blind-stored-xss/" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Bookly #1 WordPress Booking Plugin (Lite) 13.2 – Blind Stored XSS</span></a></div><div class="nav-next"><a href="https://luigigubello.github.io/blog/multiple-stored-xss-in-aol-mail/" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">Multiple stored XSS in AOL Mail</span></a></div></div>
	</nav></main></div>
		
		</div>
		
				
		
		
		<footer id="colophon" class="site-footer" role="contentinfo" itemscope="itemscope" itemtype="http://schema.org/WPFooter"><div class="site-info">
				<a href="https://wordpress.org/">Proudly powered by WordPress</a>
				<span class="sep"> | </span>
				Theme: Munsa Lite by <a href="https://foxland.fi/">Foxland</a>.			</div>
			
			
				
			<a href="#site-wrapper" id="scroll-up" class="scroll-up" data-scroll><span class="scroll-up-wrapper">Back to top</span></a>
		
		</footer></div>
	
</div>

<script type="text/javascript" src="https://luigigubello.github.io/blog/wp-content/themes/munsa-lite/js/smooth-scroll.min.js"></script><script type="text/javascript">
/* <![CDATA[ */
var MunsaLiteScreenReaderText = {"expandMenu":"Menu","collapseMenu":"Close","expandSidebar":"Info","collapseSidebar":"Close"};
/* ]]> */
</script><script type="text/javascript" src="https://luigigubello.github.io/blog/wp-content/themes/munsa-lite/js/settings.min.js"></script><script type="text/javascript" src="https://luigigubello.github.io/blog/wp-content/themes/munsa-lite/js/skip-link-focus-fix.min.js"></script><script type="text/javascript" src="https://luigigubello.github.io/blog/wp-content/plugins/wp-social-sharing/static/socialshare.js"></script></body></html>
